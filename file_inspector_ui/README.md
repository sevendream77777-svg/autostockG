# 파일 인스펙터 UI: File Inspector

`file_inspector_ui/serve_file_viewer.py`는 로컬 HTTP 서버를 띄워서 깃 리포지터리의 파일을 라인 단위로 살펴보는 기본 UI입니다. 이 버전에서는 검색, 자동 스캔된 파이프라인(.py) 목록, 실제 import + 실행(경로 문자열/`os.path.join`/`subprocess.run`) 종속성 트리, 설명 요약, 최근 수정 목록, Python 개요까지 한 화면에 배치해서 더 빠르게 원하는 코드로 접근할 수 있습니다.

## 핵심 기능

- **검색 + 강조**: 상단 검색창에 partial/full 경로를 입력하면 리스트에 해당 파일을 실시간으로 보여주며 검색어를 하이라이트합니다. 결과가 여러 개일 때 이름을 클릭해 중복된 경로 중 하나를 선택할 수 있습니다.
- **파이프라인 맵**: 왼쪽 상단의 패널은 리포지터리의 모든 `.py` 파일을 자동 스캔해 목록화합니다. `⟳ 새로고침`을 누르면 최신 상태로 다시 스캔합니다.
- **파일 설명 & 메타**: `pipeline/descriptions.txt`를 기반으로 파일마다 간략한 설명을 뽑아내고, 실제 파일을 열었을 때 크기, 수정 시간과 함께 표시합니다. 여기에 검색어가 포함된 경로를 쉽게 열 수 있도록 링크도 제공합니다.
- **의존성 트리 & 흐름 통찰**: 사이드바 아래 “의존성 트리”는 실제 `.py` 파일을 파싱한 import 관계와 `subprocess.run` 등에서 발견한 `.py` 실행 경로를 계층적으로 보여주며, 클릭한 노드가 오른쪽으로 곧바로 반영됩니다. 트리의 각 경로는 “이 파일이 참조하는 파일” / “이 파일을 참조하는 파일” 리스트와 연결되어 있으니 run_modelengine_top10.py처럼 복잡한 흐름을 한 번에 추적할 수 있습니다.
- **커스텀 설명 추가**: `file_inspector_ui/custom_descriptions.json`에 `{ "상대경로 또는 파일명": "설명" }` 형태로 적어두면 기본 설명보다 우선해서 표시됩니다. 파일 상단 주석/문자열을 추가해도 자동으로 요약에 반영됩니다.
- **Python 파일 개요**: 전체 `.py` 파일을 문서/첫 docstring 기준으로 요약해 놓은 별도 목록이 오른쪽에 있으며, 필터 입력을 써서 경로나 이름으로 바로 원하는 Python 파일을 찾을 수 있습니다.
- **최근 수정 목록**: 사이드바에 최신 수정한 파일을 정리해서 자주 보는 파일을 빠르게 다시 열 수 있습니다.
- **직접 경로 입력**: 경로 입력란에 `MODELENGINE/UTIL/daily_recommender.py`처럼 정확한 경로를 넣으면 바로 해당 파일을 불러올 수 있습니다.

## 실행 방법

1. 파이썬만 설치되어 있으면 루트에서 다음 명령이나 바로가기를 실행합니다.
   ```bash
   python file_inspector_ui/serve_file_viewer.py
   ```
   더 빠르게 실행하려면 `file_inspector_ui/run_file_inspector.bat`을 더블클릭하면 같은 서버가 뜹니다 (Windows).
2. 브라우저에서 기본 주소(`http://127.0.0.1:8000`)로 접속합니다.
3. 검색창에 partial/full 경로를 입력하거나, 경로 입력란에 정확한 경로를 넣고 `열기 / 검색` 버튼을 누릅니다.
4. 왼쪽 파이프라인 목록의 항목을 클릭하면 아래의 의존성 트리에 해당 파일이 기준으로 펼쳐지고, 트리/검색 결과/최근 목록에서 원하는 파일을 클릭하면 오른쪽에 내용과 설명이 즉시 나타납니다. `subprocess.run`으로 호출하는 `.py` 경로도 자동으로 연결됩니다.
5. 오른쪽 파일 패널 상단에는 “이 파일이 참조하는 파일”과 “이 파일을 참조하는 파일” 목록이 있어서 라인 흐름을 따라갈 수 있으며, 리스트의 이름을 클릭해 트리를 다시 내려가며 탐색할 수 있습니다.
6. Python 개요 패널의 필터를 써서 경로나 파일명 일부를 입력하면 목록이 바로 좁혀지고, 원하는 경로를 클릭해서 열 수 있습니다. `pipeline` 파라미터를 붙이면 특정 파이프라인을 미리 선택하는 것도 가능합니다.

## 직접 링크 예시

- `http://127.0.0.1:8000/?path=MODELENGINE/UTIL/daily_recommender.py`
- `http://127.0.0.1:8000/?query=run_pipeline`
- `http://127.0.0.1:8000/?pipeline=4`
